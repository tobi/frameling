# Chromium Flags Configuration
# These flags optimize Chromium/Chrome for Wayland and the Framework Laptop hardware

# --ozone-platform=wayland
# Forces Chromium to use the native Wayland backend instead of XWayland.
# This enables better HiDPI scaling, improved performance, and proper Wayland-native
# input handling (touch gestures, fractional scaling). Essential for Wayland compositors
# like Hyprland.

--ozone-platform=wayland

# --ozone-platform-hint=wayland
# Provides a hint to Ozone about which platform to use. Works in conjunction with
# --ozone-platform to ensure consistent Wayland usage across all Chromium sessions.
# Helps prevent fallback to X11/XWayland.

--ozone-platform-hint=wayland

# --enable-features=TouchpadOverscrollHistoryNavigation,HDRSupport
# Enables specific experimental or opt-in features:
#
# - TouchpadOverscrollHistoryNavigation: Enables two-finger swipe gestures on touchpads
#   to navigate backward/forward through page history. Essential for laptop usage,
#   especially on Framework Laptop with precision touchpad.
#
# - HDRSupport: Enables High Dynamic Range (HDR) video playback support. Allows proper
#   rendering of HDR content on compatible displays (though Framework display is SDR,
#   this enables tone-mapping for HDR videos).

--enable-features=TouchpadOverscrollHistoryNavigation,HDRSupport

# --enable-hardware-overlays=single-fullscreen,single-on-top,underlay
# Configures hardware overlay planes for video playback and GPU compositing.
# Hardware overlays allow the GPU to composite video/images directly without CPU
# involvement, significantly reducing power usage and improving video playback.
#
# - single-fullscreen: Use overlays for fullscreen video (YouTube fullscreen, etc.)
# - single-on-top: Use overlays for floating video players (picture-in-picture)
# - underlay: Allow video to be composited below other content (more efficient)
#
# Particularly beneficial for AMD Radeon 860M iGPU power efficiency.

--enable-hardware-overlays=single-fullscreen,single-on-top,underlay

# --disable-features=InfiniteSessionRestore,WaylandWpColorManagerV1
# Disables specific features that cause issues or are unwanted:
#
# - InfiniteSessionRestore: Disables the automatic session restore that can cause
#   Chromium to restore all tabs from previous sessions indefinitely. Prevents
#   memory bloat and unexpected tab restoration after crashes.
#
# - WaylandWpColorManagerV1: Disables Wayland color management protocol v1.
#   This protocol can cause color rendering issues on some Wayland compositors.
#   Hyprland's color management is handled separately, so this avoids conflicts.

--disable-features=InfiniteSessionRestore,WaylandWpColorManagerV1

# --load-extension=~/.local/share/omarchy/default/chromium/extensions/copy-url
# Loads a custom extension on browser startup. This Omarchy-provided extension
# likely adds URL copying functionality to the context menu or toolbar.
# Extensions loaded via command-line bypass the Chrome Web Store and are useful
# for system-integrated tools.

--load-extension=~/.local/share/omarchy/default/chromium/extensions/copy-url